{
  "comments_id": "44574095",
  "rank": 4,
  "title": "Encrypting Files with Passkeys and Age",
  "link": "https://words.filippo.io/passkey-encryption/",
  "created_date": "2025-07-15T20:14:02.112847",
  "comments_summary": "以下は、Hacker Newsのコメントの要約です。\n\nこの記事は、WebAuthnのPRF（擬似ランダム関数）を使用して、パスキーでファイルを暗号化する方法について議論しています。\n\n## パスキーの共有と管理\n\nパスキーを他の人と共有したい場合、サービスがゲストサインイン機能を実装していない場合でも、iOSのAirdropや1Passwordの共有Vaultなどの方法が考えられます。また、メールで送信されるマジックリンクを転送することも可能です。\n\n## パスキーによるファイル暗号化の利点と課題\n\nパスキーを使用すると、プライベートキーを直接管理する手間を省きながら、同期されたパスキーをファイル暗号化に再利用できます。ただし、パスキーが漏洩した場合、完全なローテーションとファイルの再暗号化が必要になります。\n\n## パスキーによるファイル暗号化の実用化\n\nカジュアルなバックアップには適していますが、本番環境での使用には、自動ローテーションをクリーンに処理するためのツールが必要になります。対称鍵をAge鍵で暗号化する間接的なレイヤーを追加することで、ローテーションが可能になります。また、エンベロープ暗号化を使用すると、複数のパスキーでの復号も可能になります。\n\n## SafariのPRFサポート\n\nSafariはPRF拡張をサポートしていないため、同様のアプリケーション（E2E暗号化）を長らく待っていた人にとっては残念です。ただし、iCloud KeychainはChromeで使用するとPRF拡張をサポートしているため、Safariでもサポートされていると想定されていました。\n\n## その他の情報源\n\nパスキーでファイルを暗号化するシンプルなWebアプリとして、https://filekey.app が紹介されています。\n\n## まとめ\n\nWebAuthnのPRFを使用すると、パスキーによるファイル暗号化が可能になり、利便性とセキュリティが向上します。ただし、パスキーのローテーションやSafariのPRFサポートなど、いくつかの課題も存在します。"
}