{
  "comments_id": "44846318",
  "rank": 7,
  "title": "OpenFreeMap survived 100k requests per second",
  "link": "https://blog.hyperknot.com/p/openfreemap-survived-100000-requests",
  "created_date": "2025-08-09T20:12:46.756956",
  "comments_summary": "OpenFreeMapが、wplace.liveというウェブサイトからのトラフィック急増によりサービス停止に見舞われた件に関するHacker Newsのスレッドです。OpenFreeMapの著者が、インフラへの影響と対応について説明しています。\n\n## トラフィックの急増と原因\n\n*   wplace.liveというウェブサイトの利用が急増し、OpenFreeMapに大量のトラフィックが集中した。\n*   トラフィックは1秒あたり100,000リクエストに達し、OpenFreeMapのサーバーを圧倒した。\n*   wplace.liveのユーザーがマップを広範囲に探索したり、アートを探したりするために、多くのリクエストが発生している可能性がある。\n*   自動化されたスクリプト（スクリプトキディ）によるアクセスも一部あると推測されている。\n\n## OpenFreeMapの対応\n\n*   CloudflareのCDNがトラフィックの大部分をキャッシュしていたため、サーバーへの影響は軽減された（キャッシュヒット率99.38%）。\n*   リファラーに基づいてリクエストを制限することで、wplace.liveからのトラフィックを制御した。\n*   高可用性を確保するため、セルフホスティングを推奨している。\n*   nginxの設定を調整し、ファイル記述子の制限を改善しようとしている。\n\n## コメントの主な論点\n\n*   wplace.liveの利用が急増したのは、r/placeのようなイベントに似た人気によるもので、スクリプトによる攻撃だけではない。\n*   OpenFreeMapのインフラは、大量の静的ファイルを提供するために最適化されている。\n*   OpenFreeMapが無料で提供されているため、インフラへの負荷を考慮し、利用者は節度を持つべきだという意見がある。\n*   Cloudflare R2などの代替ストレージサービスに関する議論も行われている。\n\n## まとめ\n\nOpenFreeMapがwplace.liveからの予期せぬトラフィック急増に見舞われ、サービス停止の危機に瀕した。しかし、CloudflareのCDNやリファラー制限などの対策により、サービスへの影響を最小限に抑えることができた。"
}